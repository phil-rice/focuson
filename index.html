<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>One file no compilation react app</title>
    <LINK href="index.css" rel="stylesheet" type="text/css">
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script type="text/javascript" src="node_modules/crypto-js/crypto-js.js"></script>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>


<script>
    let squareCode = `
    const e = React.createElement;

    function Square(props) {
        return e("button", {className: "square", onClick: () => props.onClick()}, props.value);
    }
    Square
    `

    let boardCode = `
    const e = React.createElement;

    class Board extends React.Component {
        constructor(props) {
            super(props);
            this.classMap=this.props.classMap
            this.state = {squares: this.props.squares, xIsNext: true}
        }

        renderSquare(i) {
            return e( this.classMap.square, {value: this.state.squares[i], onClick: () => this.handleClick(i)})
        }

        next() {
            return this.state.xIsNext ? 'X' : 'O'
        }

        handleClick(i) {
            const squares = this.state.squares.slice();
            squares[i] = this.next()
            this.setState({squares: squares, xIsNext: !this.state.xIsNext});
        }

        render() {
            const status = 'Next player: ' + this.next();
            return (
                e("div", null, e("div", {className: "status"}, status),
                    e("div", {className: "board-row"}, this.renderSquare(0), this.renderSquare(1), this.renderSquare(2)),
                    e("div", {className: "board-row"}, this.renderSquare(3), this.renderSquare(4), this.renderSquare(5)),
                    e("div", {className: "board-row"}, this.renderSquare(6), this.renderSquare(7), this.renderSquare(8)))
            )
        }
    }
    Board
    `

    var gameCode = `
    class Game extends React.Component {
        constructor(props) {
            super(props);
            this.classMap = this.props.classMap
            this.squares = this.props.squares
        }

        render() {
            const e = React.createElement;
            let board = e(this.classMap.board, {
                squares: this.squares,
                classMap: this.classMap
            });
            return (
                e("div", {className: "game"}, e("div", {className: "game-board"}, board),
                    e("div", {className: "game-info"},
                        e("div", null),
                        e("ol", null)))
            )
        }
    }
    Game
    `

    // require("Game/b691ea7df38c51d418be2ca139f83c3dc40570a636c7797faa9f66602d8391b0")
    //
    // console.log("cryto", "" + CryptoJS.SHA256("somethins"))

    let squareClassFromApi = eval(squareCode)
    let boardClassFromApi = eval(boardCode)
    let gameClassFromApi = eval(gameCode)
    let classMap = {board: boardClassFromApi, game: gameClassFromApi, square: squareClassFromApi}

    let dataThatCameFromApi = [1, 2, 3, 4, 5, 6, 7, 8, 9];
    ReactDOM.render(React.createElement(gameClassFromApi, {
        classMap: classMap,
        squares: dataThatCameFromApi
    }), document.getElementById('root'))

</script>

</body>
</html>
